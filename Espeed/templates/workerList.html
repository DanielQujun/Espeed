<!-- 基础空白文档 -->
<!DOCTYPE html>
<html>

<head lang="en">
  <meta charset="utf-8">
  <title>列表页</title>
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1 user-scalable=no">
  <script type="text/javascript" src="../static/lib/index.min.js"></script>          <!-- 解决移动端适配 -->
  <link rel="stylesheet" href="../static/css/weui.css">
  <link rel="stylesheet" href="../static/iconfont/iconfont.css">
  <link rel="stylesheet" href="../static/css/jquery-weui.css">
  <link rel="stylesheet" href="../static/css/style.css">
</head>

<body>
  <div class="workerList">
    <!-- 头部 -->

    <header>
        <div class="weui-navbar">
            <div class="weui-navbar__item weui_bar__item_on">
                <span id="distanceFilter">离我最近</span>
            </div>
            <div class="weui-navbar__item">
                最新上线
            </div>
          </div>
    </header>

    <!-- 主体内容 -->
    <section class="main">
          <ul class="listCon">
        <li class="listItem flex">
          <div class="portraitBox">
            <img src="../static/images/defaulthead.png" >
            <p>刘黎波</p>
          </div>
          <div class="infoBox flex">
              <div class="list_hd flex">
                  <div class="tagBox"><span class="tag">木工</span><span class="tag">木工</span></div>
                  <div class="star"><i class="iconfont icon-wuxing"></i></div>
                </div>
                <div class="list_bd flex">
                    <span class="distance">距您：2.6km</span>
                    <p class="publishedTime">发布于：03-24 18:42</p>
                </div>
                <div class="list_ft flex">
                    <a href="#" class="rate weui-btn weui-btn_mini weui-btn_plain-primary">评价</a>
                    <a href="#" class="check weui-btn weui-btn_mini weui-btn_primary">查看电话号码</a>
                </div>
          </div>
        </li>
        <li class="listItem flex">
          <div class="portraitBox">
            <img src="../static/images/defaulthead.png" >
            <p>刘黎波</p>
          </div>
          <div class="infoBox flex">
              <div class="list_hd flex">
                  <div class="tagBox"><span class="tag">木工</span><span class="tag">木工</span></div>
                  <div class="star"><i class="iconfont icon-wuxing"></i></div>
                </div>
                <div class="list_bd flex">
                    <span class="distance">距您：2.6km</span>
                    <p class="publishedTime">发布于：03-24 18:42</p>
                </div>
                <div class="list_ft flex">
                    <a href="#" class="rate weui-btn weui-btn_mini weui-btn_plain-primary">评价</a>
                    <a href="#" class="check weui-btn weui-btn_mini weui-btn_primary">查看电话号码</a>
                </div>
          </div>
        </li>
      </ul>
    </section>

    <!-- 底部 -->
    <footer>
        <a href="javascript:;"><button  class="smallBtn Relocate"><i class="iconfont icon-shuaxin"></i></button></a>
        <a href="javascript:;"><button  class="bigBtn cancel"><i class="iconfont icon-quxiao"></i>取消发布</button></a>
        <a href="userCenter.html"><button  class="smallBtn"><i class="iconfont icon-wode"></i></button></a>

    </footer>
  </div>

  <script type="text/javascript" src="../static/lib/jquery-2.1.4.js"></script>
  <script type="text/javascript" src="../static/js/jquery-weui.min.js"></script>        <!-- 为将来做拓展，引入Jquery weui -->
  <script type="text/javascript" src="../static/lib/fastclick.js"></script>            <!-- 解决点击屏幕延迟，需要测试是否有效，无效再删除 -->
  <script>
    // 开启fastclick功能
    $(function() {
        FastClick.attach(document.body);

        //数据格式，格式内容有待确定
        var $listData = [
            {
                id: 01,
                username: "刘黎波",
                tag:['木工','瓦工'],
                star: 4,
                pubTime: 45124245624412,
                distance: 26000,
                isVisible: false,
                phoneNum: 18570607610,
                portraitUrl: "https://pic4.zhimg.com/e64e79141_xl.jpg"
            },
            {
                id: 01,
                username: "刘黎波",
                tag:['木工','瓦工'],
                star: 4,
                pubTime: 45124245624412,
                distance: 26000,
                isVisible: false,
                phoneNum: 15080755770,
                portraitUrl: "https://pic2.zhimg.com/508cda69d36115a28704ea2e12bbfbcb_xl.jpg"
            }
        ]


        $.each($listData,function (key,val) {
            var str = "";

            str += '<li class="listItem flex">' +
                '<div class="portraitBox">' +
                '<img src="val.portraitUrl" >' +
                '<p>val.username</p>' +
                '</div>' +
                '<div class="infoBox flex">' +
                '<div class="list_hd flex">' +
                '<div class="tagBox"><span class="tag">木工</span><span class="tag">木工</span></div>' +
                '<div class="star"><i class="iconfont icon-wuxing"></i></div>' +
                '</div>' +
                '<div class="list_bd flex">' +
                '<span class="distance">距您：'+ val.distance + 'km</span>' +
                '<p class="publishedTime">发布于：'+ val.pubTime + '</p>' +
                '</div>' +
                '<div class="list_ft flex">' +
                '<a href="#" class="rate weui-btn weui-btn_mini weui-btn_plain-primary">评价</a>' +
                '<a href="#" class="check weui-btn weui-btn_mini weui-btn_primary">查看电话号码</a>' +
                '</div>' +
                '</div>' +
                '</li>'

            $('.listCon').html(str);
        })



        $('.cancel').click(function () {
            $.confirm("取消后，您的信息将对其他人不可见","确认取消", function() {
                //点击确认后跳转到列表页
                location.href = "http://localhost:63342/Espeed/Espeed/templates/jobs.html"
                //（TODO:清除session)


            }, function() {
                //点击取消
                return false;
            });
        })

    });


    //获取位置信息排序列表,接口未定义（TODO: 定义排序接口）
    $(function () {
        $("#distanceFilter").click(function () {
            $.get(
                "/try/ajax/demo_test.php",
                function(data,status){
                alert("数据: " + data + "\n状态: " + status);
            });

        });

    });

  </script>
</body>

</html>